(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},629:e=>{"use strict";e.exports=require("fs/promises")},5315:e=>{"use strict";e.exports=require("path")},7741:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>d,tree:()=>u}),s(151),s(7718),s(7824);var r=s(3282),n=s(5736),i=s(3906),a=s.n(i),o=s(6880),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let u=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,151)),"D:\\Work\\chatPipes\\apps\\web\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7718)),"D:\\Work\\chatPipes\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7824,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Work\\chatPipes\\apps\\web\\src\\app\\page.tsx"],m="/page",h={require:s,loadChunk:()=>Promise.resolve()},d=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},900:(e,t,s)=>{Promise.resolve().then(s.bind(s,6658))},7173:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,4424,23)),Promise.resolve().then(s.t.bind(s,7752,23)),Promise.resolve().then(s.t.bind(s,5275,23)),Promise.resolve().then(s.t.bind(s,9842,23)),Promise.resolve().then(s.t.bind(s,1633,23)),Promise.resolve().then(s.t.bind(s,9224,23))},4548:()=>{},6658:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(3227),n=s(3677),i=s(7294);function a(){let[e,t]=(0,n.useState)("chatgpt"),[s,a]=(0,n.useState)(""),[o,l]=(0,n.useState)(""),[u,c]=(0,n.useState)(!1),[m,h]=(0,n.useState)(null),d=async()=>{try{c(!0);let t=new i.Js(e,{name:"Web Assistant",description:"A helpful AI assistant for web interactions",instructions:"Provide helpful and accurate responses.",temperature:.7},{},{useBrowser:!1,browserConfig:{headless:!0}});await t.init(),h(t),l("✅ Session created successfully!")}catch(e){l(`❌ Error creating session: ${e instanceof Error?e.message:String(e)}`)}finally{c(!1)}},g=async()=>{if(m&&s.trim())try{c(!0);let e=await m.sendPrompt(s);l(e)}catch(e){l(`❌ Error: ${e instanceof Error?e.message:String(e)}`)}finally{c(!1)}};return r.jsx("div",{className:"min-h-screen bg-gray-100 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[r.jsx("h1",{className:"text-4xl font-bold text-center mb-8 text-gray-800",children:"ChatPipes Web Interface"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Session Management"}),(0,r.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,r.jsxs)("select",{value:e,onChange:e=>t(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"chatgpt",children:"ChatGPT"}),r.jsx("option",{value:"claude",children:"Claude"}),r.jsx("option",{value:"perplexity",children:"Perplexity"}),r.jsx("option",{value:"deepseek",children:"DeepSeek"})]}),r.jsx("button",{onClick:d,disabled:u,className:"px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50",children:u?"Creating...":"Create Session"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Status: ",m?"✅ Connected":"❌ Not connected"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Chat Interface"}),r.jsx("div",{className:"mb-4",children:r.jsx("textarea",{value:s,onChange:e=>a(e.target.value),placeholder:"Enter your prompt here...",className:"w-full h-32 p-3 border border-gray-300 rounded-md resize-none",disabled:!m||u})}),r.jsx("button",{onClick:g,disabled:!m||!s.trim()||u,className:"px-6 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50",children:u?"Sending...":"Send Prompt"}),o&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-md",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Response:"}),r.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:o})]})]})]})})}},1013:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationOrchestrator=void 0;let r=s(2293),n=s(6709),i=s(2827);class a{constructor(e){this.agents=new Map,this.memoryManagers=new Map,this.isRunning=!1,this.currentRound=0,this.events=[],this.config=e,this.conversationId=this.generateConversationId()}async initialize(){for(let e of(console.log(`Initializing conversation orchestrator with ${this.config.agents.length} agents`),this.config.agents)){let t=new i.FileStore,s=new n.MemoryManager(t,e.id);await s.init(),this.memoryManagers.set(e.id,s);let a=new r.BrowserAgentSession(e.target,e.persona,e.platformConfig||{},e.browserConfig||{useBrowser:!1});a.setMemoryManager(s),await a.init(),this.agents.set(e.id,a)}console.log("Conversation orchestrator initialized successfully")}async startConversation(e){if(this.isRunning)throw Error("Conversation is already running");if(this.isRunning=!0,this.currentRound=0,console.log(`Starting conversation: ${this.conversationId}`),e){let t=this.config.agents[0],s=this.agents.get(t.id);if(s){let r=Date.now(),n=await s.sendPrompt(e),i=Date.now()-r;this.events.push({timestamp:new Date,round:this.currentRound,from:"user",to:t.id,prompt:e,response:n,duration:i}),console.log(`Round ${this.currentRound}: user → ${t.id}: "${e}" → "${n.substring(0,100)}..."`)}}await this.runConversationFlow()}async runConversationFlow(){let e=this.config.maxRounds||10;for(;this.isRunning&&this.currentRound<e;){for(let e of(this.currentRound++,this.config.flow)){if(!this.isRunning)break;let t=this.agents.get(e.from),s=this.agents.get(e.to);if(!t||!s){console.error(`Agent not found: ${e.from} or ${e.to}`);continue}try{let t=this.events.filter(t=>t.to===e.from).pop();if(!t){console.warn(`No previous response from ${e.from}`);continue}let r=this.buildPrompt(e.promptTemplate,{fromAgent:e.from,toAgent:e.to,lastResponse:t.response,conversationContext:await this.getConversationContext()}),n=Date.now(),i=await s.sendPrompt(r),a=Date.now()-n;this.events.push({timestamp:new Date,round:this.currentRound,from:e.from,to:e.to,prompt:r,response:i,duration:a}),console.log(`Round ${this.currentRound}: ${e.from} → ${e.to}: "${r.substring(0,100)}..." → "${i.substring(0,100)}..."`),e.delay&&await new Promise(t=>setTimeout(t,e.delay))}catch(t){console.error(`Error in conversation flow: ${t instanceof Error?t.message:String(t)}`),this.events.push({timestamp:new Date,round:this.currentRound,from:e.from,to:e.to,prompt:"ERROR",response:t instanceof Error?t.message:String(t),duration:0})}}if(!this.shouldContinueConversation()){console.log("Conversation ending conditions met");break}}this.isRunning=!1,console.log(`Conversation completed after ${this.currentRound} rounds`)}async stopConversation(){this.isRunning=!1,console.log("Conversation stopped by user")}async addInterjection(e,t){let s=this.agents.get(e);if(!s)throw Error(`Agent not found: ${e}`);let r=Date.now(),n=await s.sendPrompt(t),i=Date.now()-r;return this.events.push({timestamp:new Date,round:this.currentRound,from:"user",to:e,prompt:t,response:n,duration:i}),console.log(`Interjection: user → ${e}: "${t}" → "${n.substring(0,100)}..."`),n}async queuePrompt(e,t){let s=this.agents.get(e);if(!s)throw Error(`Agent not found: ${e}`);await s.queuePrompt(t),console.log(`Prompt queued for ${e}: "${t}"`)}async saveConversation(e){let t={id:this.conversationId,config:this.config,events:this.events,agents:Array.from(this.agents.entries()).map(([e,t])=>({id:e,sessionData:t.exportSession()})),memoryManagers:Array.from(this.memoryManagers.entries()).map(([e,t])=>({id:e}))},r=s(2048).promises,n=e||`conversations/${this.conversationId}.json`;await r.mkdir("conversations",{recursive:!0}),await r.writeFile(n,JSON.stringify(t,null,2)),console.log(`Conversation saved to: ${n}`)}static async loadConversation(e){let t=s(2048).promises,n=JSON.parse(await t.readFile(e,"utf-8")),i=new a(n.config);for(let e of n.agents){let t=await r.BrowserAgentSession.importSession(e.sessionData);i.agents.set(e.id,t)}return i.events=n.events.map(e=>({...e,timestamp:new Date(e.timestamp)})),i.conversationId=n.id,i}buildPrompt(e,t){return e?e.replace("{fromAgent}",t.fromAgent).replace("{toAgent}",t.toAgent).replace("{lastResponse}",t.lastResponse).replace("{conversationContext}",t.conversationContext):`Continue the conversation based on this response: "${t.lastResponse}"`}async getConversationContext(){return(await Promise.all(Array.from(this.memoryManagers.values()).map(e=>e.getRehydrationPrompt()))).filter(Boolean).join("\n\n")}shouldContinueConversation(){return this.currentRound<(this.config.maxRounds||10)}generateConversationId(){return`conv-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getConversationId(){return this.conversationId}getEvents(){return[...this.events]}getCurrentRound(){return this.currentRound}isConversationRunning(){return this.isRunning}getAgents(){return new Map(this.agents)}getAgent(e){return this.agents.get(e)}async close(){for(let e of(this.isRunning=!1,this.agents.values()))await e.close();console.log("Conversation orchestrator closed")}}t.ConversationOrchestrator=a},2260:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialoguePipe=void 0;let r=s(7702);class n extends r.EventEmitter{constructor(e,t,s={}){super(),this.isRunning=!1,this.isPaused=!1,this.round=0,this.interjections=[],this.conversationHistory=[],this.agentA=e,this.agentB=t,this.config={maxRounds:10,turnDelay:1e3,autoStart:!1,enableStreaming:!0,interjectionPattern:/Side question – (.+)/i,...s},this.currentTurn="A"}setWhoStarts(e){this.currentTurn=e,this.emit("turn_change",{agent:e,timestamp:new Date})}addInterjection(e){this.interjections.push(e);let t={type:"interjection",agent:this.currentTurn,interjection:e,timestamp:new Date,round:this.round};this.emit("interjection_added",t),this.emit("turn_event",t)}pause(){this.isPaused=!0;let e={type:"pause",agent:this.currentTurn,timestamp:new Date,round:this.round};this.emit("dialogue_paused",e),this.emit("turn_event",e)}resume(){this.isPaused=!1;let e={type:"resume",agent:this.currentTurn,timestamp:new Date,round:this.round};this.emit("dialogue_resumed",e),this.emit("turn_event",e)}async runOnce(){if(this.isPaused)throw Error("Dialogue is paused. Call resume() first.");let e="A"===this.currentTurn?this.agentA:this.agentB;"A"===this.currentTurn?this.agentB:this.agentA;let t=this.getLastMessageFromOtherAgent();if(!t&&this.round>0)throw Error("No message to respond to");let s=this.getApplicableInterjections(),r=t||"Start the conversation.";s.length>0&&(r=this.applyInterjectionsToPrompt(r,s),this.clearProcessedInterjections(s));let n={type:"turn_start",agent:this.currentTurn,timestamp:new Date,round:this.round};this.emit("turn_start",n),this.emit("turn_event",n);try{let t=await this.sendPromptWithStreaming(e,r);this.conversationHistory.push({agent:this.currentTurn,message:t,timestamp:new Date,round:this.round,interjection:s.length>0?s[0]:void 0});let n={type:"turn_end",agent:this.currentTurn,message:t,timestamp:new Date,round:this.round};this.emit("turn_end",n),this.emit("turn_event",n),this.currentTurn="A"===this.currentTurn?"B":"A",this.round++,this.config.turnDelay&&await new Promise(e=>setTimeout(e,this.config.turnDelay))}catch(e){throw this.emit("error",{agent:this.currentTurn,error:e instanceof Error?e.message:String(e),timestamp:new Date,round:this.round}),e}}async runLoopUntilStopped(){this.isRunning=!0,this.emit("dialogue_started",{timestamp:new Date});try{for(;this.isRunning&&this.round<(this.config.maxRounds||10);){if(this.isPaused){await new Promise(e=>setTimeout(e,100));continue}await this.runOnce()}this.round>=(this.config.maxRounds||10)&&this.emit("dialogue_completed",{reason:"max_rounds_reached",rounds:this.round,timestamp:new Date})}catch(e){throw this.emit("dialogue_error",{error:e instanceof Error?e.message:String(e),timestamp:new Date}),e}finally{this.isRunning=!1,this.emit("dialogue_stopped",{timestamp:new Date})}}stop(){this.isRunning=!1,this.emit("dialogue_stopping",{timestamp:new Date})}async sendPromptWithStreaming(e,t){if(!this.config.enableStreaming)return await e.sendPrompt(t);{this.emit("streaming_start",{agent:this.currentTurn,prompt:t,timestamp:new Date});let s=await e.sendPrompt(t);for(let e of this.chunkResponse(s,50))this.emit("streaming_chunk",{agent:this.currentTurn,chunk:e,timestamp:new Date}),await new Promise(e=>setTimeout(e,50));return this.emit("streaming_end",{agent:this.currentTurn,response:s,timestamp:new Date}),s}}getLastMessageFromOtherAgent(){let e="A"===this.currentTurn?"B":"A",t=this.conversationHistory.filter(t=>t.agent===e).pop();return t?.message||null}getApplicableInterjections(){return this.interjections.filter(e=>!e.target||"both"===e.target||("A"===e.target?"A":"B")===this.currentTurn).sort((e,t)=>{let s={high:3,medium:2,low:1},r=s[e.priority],n=s[t.priority];return r!==n?n-r:e.timestamp.getTime()-t.timestamp.getTime()})}applyInterjectionsToPrompt(e,t){if(0===t.length)return e;let s=t[0];switch(s.type){case"side_question":return`${e}

Side question – ${s.text}`;case"correction":return`${e}

Correction: ${s.text}`;case"direction":return`${e}

Direction: ${s.text}`;default:return e}}clearProcessedInterjections(e){let t=new Set(e.map(e=>e.id));this.interjections=this.interjections.filter(e=>!t.has(e.id))}chunkResponse(e,t){let s=[];for(let r=0;r<e.length;r+=t)s.push(e.slice(r,r+t));return s}getConversationHistory(){return[...this.conversationHistory]}getPendingInterjections(){return[...this.interjections]}getState(){return{isRunning:this.isRunning,isPaused:this.isPaused,currentTurn:this.currentTurn,round:this.round,maxRounds:this.config.maxRounds||10}}exportState(){return{config:this.config,conversationHistory:this.conversationHistory,currentTurn:this.currentTurn,round:this.round}}importState(e){this.config={...this.config,...e.config},this.conversationHistory=e.conversationHistory.map(e=>({...e,timestamp:new Date(e.timestamp)})),this.currentTurn=e.currentTurn,this.round=e.round}async close(){this.stop(),await this.agentA.close(),await this.agentB.close(),this.emit("dialogue_closed",{timestamp:new Date})}}t.DialoguePipe=n},6794:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiAgentDialogue=void 0;let r=s(7702);class n extends r.EventEmitter{constructor(e,t={}){super(),this.agents=[],this.history=[],this.round=0,this.turn=0,this.isRunning=!1,this.isPaused=!1,this.currentAgentIndex=0,this.agents=e.map(e=>({...e,isActive:!0})),this.config={maxRounds:10,turnDelay:1e3,enableStreaming:!0,contextWindow:5,synthesisStrategy:"recent",skipInactiveAgents:!0,allowInterruptions:!1,...t}}getNextAgent(){if(0===this.agents.length)return null;let e=0,t=this.agents.length;for(;e<t;){let t=this.agents[this.currentAgentIndex];if(t.isActive||!this.config.skipInactiveAgents)return t;this.currentAgentIndex=(this.currentAgentIndex+1)%this.agents.length,e++}return null}synthesizeContext(e){let t=this.config.contextWindow||5,s=this.history.slice(-t).filter(t=>t.agentId!==e);if(0===s.length)return"Start the conversation.";switch(this.config.synthesisStrategy||"recent"){case"all":return this.synthesizeAllContext(s);case"recent":default:return this.synthesizeRecentContext(s);case"weighted":return this.synthesizeWeightedContext(s)}}synthesizeAllContext(e){let t=e.map(e=>`${e.agentName}: ${e.message}`);return`In reply to what was just said:
${t.join("\n")}`}synthesizeRecentContext(e){if(0===e.length)return"Start the conversation.";let t=e[e.length-1],s=e.slice(0,-1);if(0===s.length)return`Respond to ${t.agentName}: "${t.message}"`;let r=s.map(e=>e.agentName).join(" and ");return`In reply to what ${r} and ${t.agentName} just said:
${e.map(e=>`${e.agentName}: ${e.message}`).join("\n")}`}synthesizeWeightedContext(e){if(0===e.length)return"Start the conversation.";let t=e.map((e,t)=>({...e,weight:t+1})),s=new Map;t.forEach(e=>{s.has(e.agentId)||s.set(e.agentId,{name:e.agentName,messages:[],totalWeight:0});let t=s.get(e.agentId);t.messages.push(e.message),t.totalWeight+=e.weight});let r=Array.from(s.values()).map(e=>{let t=e.messages[e.messages.length-1];return`${e.name} (${e.messages.length} messages): "${t}"`});return`Responding to the conversation:
${r.join("\n")}`}async nextTurn(){if(this.isPaused)throw Error("Dialogue is paused. Call resume() first.");let e=this.getNextAgent();if(!e)throw Error("No active agents available for next turn.");let t={agentId:e.id,agentName:e.name,round:this.round,turn:this.turn,previousMessages:this.history.slice(-(this.config.contextWindow||5)).map(e=>({agentId:e.agentId,agentName:e.agentName,message:e.message,timestamp:e.timestamp})),synthesizedContext:this.synthesizeContext(e.id)},s={type:"turn_start",agentId:e.id,agentName:e.name,round:this.round,turn:this.turn,timestamp:new Date};this.emit("turn_start",s);let r={type:"context_synthesized",agentId:e.id,agentName:e.name,round:this.round,turn:this.turn,context:t.synthesizedContext,timestamp:new Date};this.emit("context_synthesized",r);try{let s=await this.sendPromptWithStreaming(e.session,t.synthesizedContext);this.history.push({agentId:e.id,agentName:e.name,message:s,round:this.round,turn:this.turn,timestamp:new Date});let r={type:"turn_end",agentId:e.id,agentName:e.name,round:this.round,turn:this.turn,message:s,timestamp:new Date};this.emit("turn_end",r),this.currentAgentIndex=(this.currentAgentIndex+1)%this.agents.length,this.turn++,0===this.currentAgentIndex&&this.round++,this.config.turnDelay&&await new Promise(e=>setTimeout(e,this.config.turnDelay))}catch(t){throw this.emit("error",{agentId:e.id,agentName:e.name,error:t instanceof Error?t.message:String(t),timestamp:new Date,round:this.round,turn:this.turn}),t}}async sendPromptWithStreaming(e,t){if(!this.config.enableStreaming)return await e.sendPrompt(t);{this.emit("streaming_start",{prompt:t,timestamp:new Date});let s=await e.sendPrompt(t);for(let e of this.chunkResponse(s,50))this.emit("streaming_chunk",{chunk:e,timestamp:new Date}),await new Promise(e=>setTimeout(e,50));return this.emit("streaming_end",{response:s,timestamp:new Date}),s}}chunkResponse(e,t){let s=[];for(let r=0;r<e.length;r+=t)s.push(e.slice(r,r+t));return s}async runLoopUntilStopped(){this.isRunning=!0,this.emit("dialogue_started",{timestamp:new Date});try{for(;this.isRunning&&this.round<(this.config.maxRounds||10);){if(this.isPaused){await new Promise(e=>setTimeout(e,100));continue}await this.nextTurn()}this.round>=(this.config.maxRounds||10)&&this.emit("dialogue_completed",{reason:"max_rounds_reached",rounds:this.round,timestamp:new Date})}catch(e){throw this.emit("dialogue_error",{error:e instanceof Error?e.message:String(e),timestamp:new Date}),e}finally{this.isRunning=!1,this.emit("dialogue_stopped",{timestamp:new Date})}}pause(){this.isPaused=!0,this.emit("dialogue_paused",{timestamp:new Date})}resume(){this.isPaused=!1,this.emit("dialogue_resumed",{timestamp:new Date})}stop(){this.isRunning=!1,this.emit("dialogue_stopping",{timestamp:new Date})}setAgentActive(e,t){let s=this.agents.find(t=>t.id===e);s&&(s.isActive=t,this.emit("agent_status_changed",{agentId:e,agentName:s.name,isActive:t,timestamp:new Date}))}getState(){return{isRunning:this.isRunning,isPaused:this.isPaused,round:this.round,turn:this.turn,currentAgentIndex:this.currentAgentIndex,maxRounds:this.config.maxRounds||10,agents:this.agents.map(e=>({id:e.id,name:e.name,isActive:e.isActive}))}}getHistory(){return[...this.history]}getAgents(){return[...this.agents]}exportState(){return{config:this.config,history:this.history,round:this.round,turn:this.turn,currentAgentIndex:this.currentAgentIndex,agents:this.agents.map(e=>({id:e.id,name:e.name,isActive:e.isActive}))}}importState(e){this.config={...this.config,...e.config},this.history=e.history.map(e=>({...e,timestamp:new Date(e.timestamp)})),this.round=e.round,this.turn=e.turn,this.currentAgentIndex=e.currentAgentIndex,e.agents.forEach(e=>{let t=this.agents.find(t=>t.id===e.id);t&&(t.isActive=e.isActive)})}async close(){for(let e of(this.stop(),this.agents))await e.session.close();this.emit("dialogue_closed",{timestamp:new Date})}}t.MultiAgentDialogue=n},7573:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AgentSession=void 0;class s{constructor(e,t,s={}){this.target=e,this.persona=t,this.isInitialized=!1,this.promptQueue=[],this.latestResponse="",this.conversationHistory=[],this.sessionId=this.generateSessionId(),this.platformConfig=s}async init(){if(this.isInitialized)throw Error("Session already initialized");switch(this.target){case"chatgpt":await this.initChatGPT();break;case"claude":await this.initClaude();break;case"perplexity":await this.initPerplexity();break;case"deepseek":await this.initDeepSeek();break;default:throw Error(`Unsupported target: ${this.target}`)}this.isInitialized=!0}async sendPrompt(e){let t;if(!this.isInitialized)throw Error("Session not initialized. Call init() first.");switch(this.memoryManager&&await this.memoryManager.ingestUtterance("user",e),this.target){case"chatgpt":t=await this.sendChatGPTPrompt(e);break;case"claude":t=await this.sendClaudePrompt(e);break;case"perplexity":t=await this.sendPerplexityPrompt(e);break;case"deepseek":t=await this.sendDeepSeekPrompt(e);break;default:throw Error(`Unsupported target: ${this.target}`)}return this.latestResponse=t,this.memoryManager&&await this.memoryManager.ingestUtterance("agent",t),t}async queuePrompt(e){this.promptQueue.push(e)}async readLatestResponse(){return this.latestResponse}async close(){if(this.isInitialized){switch(this.target){case"chatgpt":await this.closeChatGPT();break;case"claude":await this.closeClaude();break;case"perplexity":await this.closePerplexity();break;case"deepseek":await this.closeDeepSeek()}this.isInitialized=!1,this.promptQueue=[],this.latestResponse="",this.conversationHistory=[]}}async startNewChat(){if(!this.isInitialized)throw Error("Session not initialized. Call init() first.");switch(this.target){case"claude":this.conversationHistory=[{role:"assistant",content:this.buildSystemPrompt()}],console.log("Started new Claude chat session");break;case"chatgpt":this.conversationHistory=[{role:"assistant",content:this.buildSystemPrompt()}],console.log("Reset ChatGPT conversation history");break;case"perplexity":this.conversationHistory=[{role:"assistant",content:this.buildSystemPrompt()}],console.log("Reset Perplexity conversation history");break;case"deepseek":this.conversationHistory=[{role:"assistant",content:this.buildSystemPrompt()}],console.log("Reset DeepSeek conversation history")}}async switchSearchType(e){if("perplexity"!==this.target)throw Error("Search type switching is only available for Perplexity");if(!this.isInitialized)throw Error("Session not initialized. Call init() first.");this.platformConfig.perplexity={...this.platformConfig.perplexity,searchType:e},console.log(`Switched Perplexity search type to: ${e}`)}async switchFocus(e){if("perplexity"!==this.target)throw Error("Focus switching is only available for Perplexity");if(!this.isInitialized)throw Error("Session not initialized. Call init() first.");this.platformConfig.perplexity={...this.platformConfig.perplexity,focus:e},console.log(`Switched Perplexity focus to: ${e}`)}getConversationHistory(){return[...this.conversationHistory]}getPlatformConfig(){return{...this.platformConfig}}setMemoryManager(e){this.memoryManager=e}async getMemoryContext(){return this.memoryManager?await this.memoryManager.getRehydrationPrompt():this.persona.memoryContext||""}async initChatGPT(){let e=this.platformConfig.chatgpt||{},t=e.model||"gpt-4";e.apiKey||console.warn("ChatGPT API key not provided. Using mock mode."),console.log(`Initializing ChatGPT session for persona: ${this.persona.name} with model: ${t}`),this.conversationHistory=[{role:"assistant",content:this.buildSystemPrompt()}]}async initClaude(){let e=this.platformConfig.claude||{},t=e.model||"claude-3-sonnet";e.apiKey||console.warn("Claude API key not provided. Using mock mode."),console.log(`Initializing Claude session for persona: ${this.persona.name} with model: ${t}`),this.conversationHistory=[{role:"assistant",content:this.buildSystemPrompt()}]}async initPerplexity(){let e=this.platformConfig.perplexity||{},t=e.searchType||"concise",s=e.focus||"web";e.apiKey||console.warn("Perplexity API key not provided. Using mock mode."),console.log(`Initializing Perplexity session for persona: ${this.persona.name} with search type: ${t}, focus: ${s}`),this.conversationHistory=[{role:"assistant",content:this.buildSystemPrompt()}]}async initDeepSeek(){let e=this.platformConfig.deepseek||{},t=e.model||"deepseek-chat";e.apiKey||console.warn("DeepSeek API key not provided. Using mock mode."),console.log(`Initializing DeepSeek session for persona: ${this.persona.name} with model: ${t}`),this.conversationHistory=[{role:"assistant",content:this.buildSystemPrompt()}]}async sendChatGPTPrompt(e){let t=(this.platformConfig.chatgpt||{}).model||"gpt-4";this.conversationHistory.push({role:"user",content:e});let s=await this.getMemoryContext();this.buildChatMessages(s,e);let r=`ChatGPT (${t}) response to: "${e}" (Persona: ${this.persona.name})`;return this.conversationHistory.push({role:"assistant",content:r}),r}async sendClaudePrompt(e){let t=(this.platformConfig.claude||{}).model||"claude-3-sonnet",s=await this.getMemoryContext();this.buildChatMessages(s,e);let r=`Claude (${t}) response to: "${e}" (Persona: ${this.persona.name})`;return this.conversationHistory.push({role:"user",content:e}),this.conversationHistory.push({role:"assistant",content:r}),r}async sendPerplexityPrompt(e){let t=this.platformConfig.perplexity||{},s=t.searchType||"concise",r=t.focus||"web",n=await this.getMemoryContext();this.buildChatMessages(n,e);let i=`Perplexity (${s}/${r}) response to: "${e}" (Persona: ${this.persona.name})`;return this.conversationHistory.push({role:"user",content:e}),this.conversationHistory.push({role:"assistant",content:i}),i}async sendDeepSeekPrompt(e){let t=(this.platformConfig.deepseek||{}).model||"deepseek-chat",s=await this.getMemoryContext();this.buildChatMessages(s,e);let r=`DeepSeek (${t}) response to: "${e}" (Persona: ${this.persona.name})`;return this.conversationHistory.push({role:"user",content:e}),this.conversationHistory.push({role:"assistant",content:r}),r}async closeChatGPT(){console.log("Closing ChatGPT session")}async closeClaude(){console.log("Closing Claude session")}async closePerplexity(){console.log("Closing Perplexity session")}async closeDeepSeek(){console.log("Closing DeepSeek session")}buildSystemPrompt(){let e=[`You are ${this.persona.name}.`,this.persona.description,this.persona.instructions];return this.persona.memoryContext&&e.push(`
Initial context: ${this.persona.memoryContext}`),e.join("\n\n")}buildChatMessages(e,t){let s=[],r=this.buildSystemPrompt();return e&&(r+=`

Context from previous interactions:
${e}`),s.push({role:"system",content:r}),s.push(...this.conversationHistory),s.push({role:"user",content:t}),s}buildPrompt(e,t){let s=[`You are ${this.persona.name}.`,this.persona.description,this.persona.instructions];return e&&s.push(`
Context from previous interactions:
${e}`),s.push(`
User: ${t}
${this.persona.name}:`),s.join("\n\n")}generateSessionId(){return`${this.target}-${this.persona.name}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getSessionId(){return this.sessionId}getPersona(){return this.persona}getTarget(){return this.target}isSessionActive(){return this.isInitialized}getQueuedPrompts(){return[...this.promptQueue]}}t.AgentSession=s},2293:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserAgentSession=void 0;let r=s(7573),n=s(Object(function(){var e=Error("Cannot find module '../browser/PlaywrightSession'");throw e.code="MODULE_NOT_FOUND",e}())),i=s(Object(function(){var e=Error("Cannot find module '../browser/playwrightPlatformConfigs'");throw e.code="MODULE_NOT_FOUND",e}()));class a extends r.AgentSession{constructor(e,t,s={},r={useBrowser:!1}){super(e,t,s),this.browserSession=null,this.sessionEvents=[],this.browserConfig=r}async init(){if(await super.init(),this.browserConfig.useBrowser)try{let e=(0,i.getPlatformConfig)(this.target);this.browserConfig.customSelectors&&Object.assign(e.selectors,this.browserConfig.customSelectors),this.browserSession=new n.PlaywrightSession(e,this.browserConfig.browserConfig),await this.browserSession.init(),this.logEvent("action",{action:"browser_initialized",target:this.target})}catch(e){throw console.error(`Failed to initialize browser session for ${this.target}:`,e),this.logEvent("error",{error:e instanceof Error?e.message:String(e),target:this.target}),e}}async sendPrompt(e){let t;if(this.logEvent("prompt",{text:e,target:this.target}),this.browserSession&&this.browserConfig.useBrowser)try{t=await this.browserSession.sendPrompt(e),this.logEvent("response",{response:t,target:this.target,method:"browser"})}catch(s){console.error(`Browser prompt failed for ${this.target}, falling back to mock:`,s),this.logEvent("error",{error:s instanceof Error?s.message:String(s),target:this.target,method:"browser"}),t=await super.sendPrompt(e),this.logEvent("response",{response:t,target:this.target,method:"mock"})}else t=await super.sendPrompt(e),this.logEvent("response",{response:t,target:this.target,method:"mock"});return t}async startNewChat(){this.browserSession&&this.browserConfig.useBrowser&&(await this.browserSession.startNewChat(),this.logEvent("action",{action:"new_chat",target:this.target})),await super.startNewChat()}async switchSearchType(e){this.browserSession&&this.browserConfig.useBrowser&&(await this.browserSession.switchSearchType(e),this.logEvent("action",{action:"switch_search_type",searchType:e,target:this.target})),await super.switchSearchType(e)}async switchFocus(e){this.browserSession&&this.browserConfig.useBrowser&&(await this.browserSession.switchFocus(e),this.logEvent("action",{action:"switch_focus",focus:e,target:this.target})),await super.switchFocus(e)}async takeScreenshot(e){return this.browserSession&&this.browserConfig.useBrowser?await this.browserSession.takeScreenshot(e):null}async getPageContent(){return this.browserSession&&this.browserConfig.useBrowser?await this.browserSession.getPageContent():null}async close(){this.browserSession&&(await this.browserSession.close(),this.logEvent("action",{action:"browser_closed",target:this.target})),await super.close()}getSessionEvents(){return[...this.sessionEvents]}async replaySession(e){for(let t of(console.log(`Replaying ${e.length} events for ${this.target}`),e)){if("prompt"===t.type)await this.sendPrompt(t.data.text);else if("action"===t.type)switch(t.data.action){case"new_chat":await this.startNewChat();break;case"switch_search_type":await this.switchSearchType(t.data.searchType);break;case"switch_focus":await this.switchFocus(t.data.focus)}await new Promise(e=>setTimeout(e,1e3))}}async exportSession(){return{target:this.target,persona:this.getPersona(),platformConfig:this.getPlatformConfig(),browserConfig:this.browserConfig,events:this.sessionEvents,memoryContext:await this.getMemoryContext()||""}}static async importSession(e,t){let s=new a(e.target,e.persona,e.platformConfig,e.browserConfig);return t&&s.setMemoryManager(t),await s.init(),s.sessionEvents=e.events,s}logEvent(e,t){this.sessionEvents.push({timestamp:new Date,type:e,data:t})}getBrowserSession(){return this.browserSession}isUsingBrowser(){return this.browserConfig.useBrowser&&null!==this.browserSession}getBrowserConfig(){return{...this.browserConfig}}}t.BrowserAgentSession=a},448:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultEmotionalAnalyzer=void 0;class s{constructor(){this.emotionKeywords={joy:["happy","joy","excited","great","wonderful","amazing","fantastic","love","like","enjoy","pleased","delighted"],sadness:["sad","depressed","unhappy","miserable","sorrow","grief","disappointed","upset","crying","tears"],anger:["angry","mad","furious","rage","hate","disgust","annoyed","irritated","frustrated","outraged"],fear:["afraid","scared","fear","terrified","anxious","worried","nervous","panic","horror","dread"],surprise:["surprised","shocked","amazed","astonished","stunned","wow","incredible","unbelievable"],disgust:["disgust","gross","nasty","revolting","sickening","repulsive","vile"]},this.intensityModifiers={very:1.5,really:1.3,extremely:1.8,quite:.8,somewhat:.6,slightly:.4,not:-.5,never:-.7}}analyzeEmotion(e){let t=e.toLowerCase(),s=t.split(/\s+/),r="",n=0,i=0,a=0,o=0,l=0;for(let[e,s]of Object.entries(this.emotionKeywords)){let u=0;for(let e of s){let s=RegExp(`\\b${e}\\b`,"gi"),r=t.match(s);r&&(u+=r.length)}for(let[e,r]of Object.entries(this.intensityModifiers)){let n=RegExp(`\\b${e}\\s+\\w*(${s.join("|")})\\w*`,"gi");t.match(n)&&(u*=r)}if(u>n&&(n=u,r=e),u>0){let t=this.getVADScores(e,u);i+=t.valence,a+=t.arousal,o+=t.dominance,l++}}if(0===l)return{valence:0,arousal:.3,dominance:.5,confidence:.1};let u=i/l,c=a/l,m=o/l,h=Math.min(n/3+s.length/50,1);return{valence:Math.max(-1,Math.min(1,u)),arousal:Math.max(0,Math.min(1,c)),dominance:Math.max(0,Math.min(1,m)),primaryEmotion:n>0?r:void 0,confidence:Math.max(.1,Math.min(1,h))}}getVADScores(e,t){let s={joy:{valence:.8,arousal:.6,dominance:.7},sadness:{valence:-.7,arousal:.3,dominance:.2},anger:{valence:-.6,arousal:.8,dominance:.8},fear:{valence:-.5,arousal:.9,dominance:.1},surprise:{valence:.2,arousal:.8,dominance:.4},disgust:{valence:-.8,arousal:.6,dominance:.3}}[e]||{valence:0,arousal:.5,dominance:.5},r=Math.min(t/3,1);return{valence:s.valence*r,arousal:s.arousal*r+(1-r)*.3,dominance:s.dominance*r+(1-r)*.5}}}t.DefaultEmotionalAnalyzer=s},8151:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMotifDetector=void 0;let r=s(3484);class n{constructor(){this.minPatternLength=3,this.maxPatternLength=20}detectMotifs(e){if(e.length<2)return[];let t=new Map;for(let s of e)for(let e of this.extractPatterns(s.text)){t.has(e)||t.set(e,{frequency:0,firstSeen:s.timestamp,lastSeen:s.timestamp,relatedMemories:[],strength:0});let r=t.get(e);r.frequency++,r.lastSeen=s.timestamp,r.relatedMemories.push(s.id);let n=Math.max(0,1-(Date.now()-r.firstSeen.getTime())/864e5/30);r.strength=Math.min(r.frequency/10+.5*n,1)}let s=[];for(let[e,n]of t.entries())n.frequency>=2&&s.push({id:(0,r.v4)(),pattern:e,frequency:n.frequency,firstSeen:n.firstSeen,lastSeen:n.lastSeen,relatedMemories:n.relatedMemories,strength:n.strength});return s.sort((e,t)=>t.frequency-e.frequency)}updateMotif(e,t){let s={...e};if(this.extractPatterns(t.text).includes(e.pattern)){s.frequency++,s.lastSeen=t.timestamp,s.relatedMemories.push(t.id);let e=(Date.now()-s.firstSeen.getTime())/864e5;s.strength=Math.min(s.frequency/10+.5*Math.max(0,1-e/30),1)}return s}extractPatterns(e){let t=[],s=e.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(e=>e.length>0);for(let e=this.minPatternLength;e<=Math.min(this.maxPatternLength,s.length);e++)for(let r=0;r<=s.length-e;r++){let n=s.slice(r,r+e).join(" ");n.length>=this.minPatternLength&&t.push(n)}let r=e.match(/"([^"]+)"/g);if(r)for(let e of r){let s=e.slice(1,-1).toLowerCase().trim();s.length>=this.minPatternLength&&t.push(s)}let n=new Map;for(let[e,r]of(s.forEach(e=>{n.set(e,(n.get(e)||0)+1)}),n.entries()))r>=2&&e.length>=3&&t.push(e);return[...new Set(t)]}}t.DefaultMotifDetector=n},806:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSummarizer=void 0;class s{summarizeFacts(e){if(0===e.length)return"No memories to summarize.";let t=new Map;e.forEach(e=>{let s=e.utterance.source;t.has(s)||t.set(s,[]),t.get(s).push(e)});let s=[];for(let[e,r]of t){let t=r.sort((e,t)=>t.utterance.timestamp.getTime()-e.utterance.timestamp.getTime()).slice(0,10),n=r.filter(e=>e.importance>.7).sort((e,t)=>t.importance-e.importance).slice(0,5),i=`${e} has ${r.length} total memories. `;if(n.length>0){let e=n.map(e=>e.utterance.text.substring(0,100)).join("; ");s.push(i+`Key points: ${e}`)}else s.push(i+`Recent activity: ${t.length} recent interactions.`)}return s.join(" ")}summarizeEmotions(e){if(0===e.length)return"No emotional data to summarize.";let t=e.filter(e=>e.utterance.emotionalTone).map(e=>e.utterance.emotionalTone);if(0===t.length)return"No emotional tone data available.";let s=t.reduce((e,t)=>e+t.valence,0)/t.length,r=t.reduce((e,t)=>e+t.arousal,0)/t.length,n=t.reduce((e,t)=>e+t.dominance,0)/t.length,i=new Map;t.forEach(e=>{e.primaryEmotion&&i.set(e.primaryEmotion,(i.get(e.primaryEmotion)||0)+1)});let a=Array.from(i.entries()).sort((e,t)=>t[1]-e[1])[0],o="Overall emotional state: ";return s>.3?o+="Generally positive, ":s<-.3?o+="Generally negative, ":o+="Neutral, ",r>.6?o+="high energy, ":r<.4?o+="calm, ":o+="moderate energy, ",n>.6?o+="assertive. ":n<.4?o+="submissive. ":o+="balanced. ",a&&(o+=`Most common emotion: ${a[0]} (${a[1]} occurrences).`),o}summarizeMotifs(e){if(0===e.length)return"No motifs detected.";let t=e.filter(e=>e.strength>.5).sort((e,t)=>t.frequency-e.frequency).slice(0,5);if(0===t.length)return"No strong motifs detected.";let s=t.map(e=>`"${e.pattern}" (frequency: ${e.frequency}, strength: ${e.strength.toFixed(2)})`);return`Detected ${e.length} motifs. Strongest patterns: ${s.join("; ")}`}}t.DefaultSummarizer=s},6709:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryManager=void 0;let r=s(7816);class n{constructor(e,t){this.store=e,this.agentId=t}async init(){await this.store.init()}async ingestUtterance(e,t){let s={timestamp:new Date().toISOString(),role:e,text:t};await this.store.saveUtterance(this.agentId,s)}async generateSummary(){let e=await this.store.getUtterances(this.agentId,50),t={timestamp:new Date().toISOString(),facts:(0,r.summarizeFacts)(e),emotions:(0,r.summarizeEmotions)(e),motifs:this.extractMotifs(e)};return await this.store.saveSummary(this.agentId,t),t}async getRehydrationPrompt(){let e=await this.store.getLatestSummary(this.agentId);return e?["This agent remembers the following:",`Facts: ${e.facts}`,`Emotional tones: ${e.emotions}`,e.motifs.length>0?`Recurring motifs: ${e.motifs.join(", ")}`:""].filter(Boolean).join("\n"):""}extractMotifs(e){let t=e=>e.toLowerCase(),s=new Map;for(let r of e){let e=t(r.text).match(/\b(being here|twin|vibe|callback|alive|weird)\b/g);e?.forEach(e=>{s.set(e,(s.get(e)??0)+1)})}return[...s.entries()].filter(([e,t])=>t>=2).map(([e])=>e)}async wipe(){await this.store.clear(this.agentId)}}t.MemoryManager=n},4040:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MotifTracker=void 0;let r=s(8151);class n{constructor(){this.motifs=new Map,this.detector=new r.DefaultMotifDetector}async trackMotifs(e){for(let t of this.detector.detectMotifs(e)){let e=this.motifs.get(t.pattern);e?(e.frequency+=t.frequency,e.lastSeen=t.lastSeen,e.relatedMemories.push(...t.relatedMemories),e.strength=Math.min(e.strength+.1,1)):this.motifs.set(t.pattern,t)}return Array.from(this.motifs.values())}async updateMotif(e,t){return this.detector.updateMotif(e,t)}getMotifs(){return Array.from(this.motifs.values())}getMotifByPattern(e){return this.motifs.get(e)}clearMotifs(){this.motifs.clear()}}t.MotifTracker=n},7816:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.summarizeFacts=function(e){if(0===e.length)return"No memories to summarize.";let t=e.filter(e=>{let t=e.text.toLowerCase();return t.includes("is")||t.includes("was")||t.includes("are")||t.includes("have")||t.includes("has")||t.includes("can")||t.includes("will")||t.includes("should")||t.includes("must")}).map(e=>e.text).slice(0,5);return t.length>0?t.join(". "):"No clear facts identified."},t.summarizeEmotions=function(e){if(0===e.length)return"No emotional data available.";let t={joy:["happy","joy","excited","great","wonderful","amazing","love","like"],sadness:["sad","depressed","unhappy","sorry","regret","miss","lost"],anger:["angry","mad","furious","hate","terrible","awful","bad"],fear:["scared","afraid","worried","anxious","nervous","fear"],surprise:["wow","surprised","shocked","unexpected","amazing"]},s={};if(e.forEach(e=>{let r=e.text.toLowerCase();for(let[e,n]of Object.entries(t))n.some(e=>r.includes(e))&&(s[e]=(s[e]||0)+1)}),0===Object.keys(s).length)return"Neutral emotional state detected.";let r=Object.entries(s).sort(([,e],[,t])=>t-e)[0];return`Overall emotional state: ${r[0]}, with ${r[1]} instances detected.`}},8788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.summarizeEmotions=function(e){if(0===e.length)return"No emotional data to summarize.";let t=e.filter(e=>e.utterance.emotionalTone).map(e=>e.utterance.emotionalTone);if(0===t.length)return"No emotional tone data available.";let s=t.reduce((e,t)=>e+t.valence,0)/t.length,r=t.reduce((e,t)=>e+t.arousal,0)/t.length,n=t.reduce((e,t)=>e+t.dominance,0)/t.length,i=new Map;t.forEach(e=>{e.primaryEmotion&&i.set(e.primaryEmotion,(i.get(e.primaryEmotion)||0)+1)});let a=Array.from(i.entries()).sort((e,t)=>t[1]-e[1])[0],o="Overall emotional state: ";return s>.3?o+="Generally positive, ":s<-.3?o+="Generally negative, ":o+="Neutral, ",r>.6?o+="high energy, ":r<.4?o+="calm, ":o+="moderate energy, ",n>.6?o+="assertive. ":n<.4?o+="submissive. ":o+="balanced. ",a&&(o+=`Most common emotion: ${a[0]} (${a[1]} occurrences).`),o},t.analyzeEmotionalTrends=function(e){let t,s;if(e.length<2)return{trend:"stable",confidence:0,details:"Insufficient data for trend analysis"};let r=e.filter(e=>e.utterance.emotionalTone).sort((e,t)=>e.utterance.timestamp.getTime()-t.utterance.timestamp.getTime());if(r.length<2)return{trend:"stable",confidence:0,details:"Insufficient emotional data"};let n=r.map(e=>e.utterance.emotionalTone.valence),i=n.slice(0,Math.floor(n.length/2)),a=n.slice(Math.floor(n.length/2)),o=i.reduce((e,t)=>e+t,0)/i.length,l=a.reduce((e,t)=>e+t,0)/a.length-o;return .1>Math.abs(l)?(t="stable",s="Emotional state has remained relatively stable"):l>0?(t="improving",s=`Emotional state has improved by ${(100*l).toFixed(1)}%`):(t="declining",s=`Emotional state has declined by ${(100*Math.abs(l)).toFixed(1)}%`),{trend:t,confidence:Math.min(2*Math.abs(l),1),details:s}},t.getEmotionalProfile=function(e){let t=e.filter(e=>e.utterance.emotionalTone).map(e=>e.utterance.emotionalTone);if(0===t.length)return{dominantEmotions:[],emotionalRange:{min:0,max:0,average:0},emotionalStability:0};let s=new Map;t.forEach(e=>{if(e.primaryEmotion){let t=s.get(e.primaryEmotion)||{count:0,totalValence:0};t.count++,t.totalValence+=e.valence,s.set(e.primaryEmotion,t)}});let r=Array.from(s.entries()).map(([e,s])=>({emotion:e,frequency:s.count/t.length,averageValence:s.totalValence/s.count})).sort((e,t)=>t.frequency-e.frequency).slice(0,5),n=t.map(e=>e.valence),i={min:Math.min(...n),max:Math.max(...n),average:n.reduce((e,t)=>e+t,0)/n.length},a=n.reduce((e,t)=>e+Math.pow(t-i.average,2),0)/n.length;return{dominantEmotions:r,emotionalRange:i,emotionalStability:Math.max(0,1-Math.sqrt(a))}}},8833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.summarizeFacts=function(e){if(0===e.length)return"No memories to summarize.";let t=new Map;e.forEach(e=>{let s=e.utterance.source;t.has(s)||t.set(s,[]),t.get(s).push(e)});let s=[];for(let[e,r]of t){let t=r.sort((e,t)=>t.utterance.timestamp.getTime()-e.utterance.timestamp.getTime()).slice(0,10),n=r.filter(e=>e.importance>.7).sort((e,t)=>t.importance-e.importance).slice(0,5),i=`${e} has ${r.length} total memories. `;if(n.length>0){let e=n.map(e=>e.utterance.text.substring(0,100)).join("; ");s.push(i+`Key points: ${e}`)}else s.push(i+`Recent activity: ${t.length} recent interactions.`)}return s.join(" ")},t.extractKeyFacts=function(e){let t=[];for(let s of e.filter(e=>e.importance>.6).sort((e,t)=>t.importance-e.importance).slice(0,10)){let e=s.utterance.text,r=s.utterance.source;t.push(`[${r}] ${e}`)}return t},t.summarizeByTopic=function(e){let t=new Map;e.forEach(e=>{let s=e.utterance.tags||[];if(0===s.length){let s="general";t.has(s)||t.set(s,[]),t.get(s).push(e)}else for(let r of s)t.has(r)||t.set(r,[]),t.get(r).push(e)});let s=new Map;for(let[e,r]of t){let t=r.filter(e=>e.importance>.5).map(e=>e.utterance.text.substring(0,80)).slice(0,5);s.set(e,t)}return s}},7294:(e,t,s)=>{"use strict";t.Js=void 0,s(6709),s(7573);var r=s(2293);Object.defineProperty(t,"Js",{enumerable:!0,get:function(){return r.BrowserAgentSession}}),s(4040),s(806),s(8151),s(448),s(2827),s(3823),s(1013),s(2260),s(6794),s(8833),s(8788)},2827:(e,t,s)=>{"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileStore=void 0;let n=r(s(629)),i=r(s(5315)),a=i.default.resolve(__dirname,"../../.memdata");class o{async init(){await n.default.mkdir(a,{recursive:!0})}filePath(e,t){return i.default.join(a,`${e}.${t}.json`)}async saveUtterance(e,t){let s=this.filePath(e,"utterances"),r=await this.getUtterances(e);r.push(t),await n.default.writeFile(s,JSON.stringify(r,null,2),"utf-8")}async getUtterances(e,t){let s=this.filePath(e,"utterances");try{let e=await n.default.readFile(s,"utf-8"),r=JSON.parse(e);return t?r.slice(-t):r}catch{return[]}}async saveSummary(e,t){let s=this.filePath(e,"summary");await n.default.writeFile(s,JSON.stringify(t,null,2),"utf-8")}async getLatestSummary(e){let t=this.filePath(e,"summary");try{let e=await n.default.readFile(t,"utf-8");return JSON.parse(e)}catch{return null}}async clear(e){await Promise.all([n.default.rm(this.filePath(e,"utterances"),{force:!0}),n.default.rm(this.filePath(e,"summary"),{force:!0})])}async saveMemory(e){let t={timestamp:e.utterance.timestamp.toISOString(),role:e.utterance.source.includes("user")?"user":"agent",text:e.utterance.text};await this.saveUtterance(e.utterance.source,t)}async getMemory(e){return(await this.getAllMemories()).find(t=>t.id===e)||null}async getAllMemories(){let e=(await n.default.readdir(a)).filter(e=>e.endsWith(".utterances.json")),t=[];for(let s of e){let e=s.replace(".utterances.json",""),r=(await this.getUtterances(e)).map((t,s)=>({id:`${e}-${s}`,utterance:{id:`${e}-utterance-${s}`,text:t.text,timestamp:new Date(t.timestamp),source:e,tags:[]},importance:.5,accessCount:0,lastAccessed:new Date(t.timestamp),createdAt:new Date(t.timestamp),motifs:[]}));t.push(...r)}return t}async getMemoriesBySource(e){return(await this.getUtterances(e)).map((t,s)=>({id:`${e}-${s}`,utterance:{id:`${e}-utterance-${s}`,text:t.text,timestamp:new Date(t.timestamp),source:e,tags:[]},importance:.5,accessCount:0,lastAccessed:new Date(t.timestamp),createdAt:new Date(t.timestamp),motifs:[]}))}async getMemoriesByTimeRange(e,t){return(await this.getAllMemories()).filter(s=>s.utterance.timestamp>=e&&s.utterance.timestamp<=t)}async deleteMemory(e){let t=(await this.getAllMemories()).find(t=>t.id===e);if(t){let e=t.utterance.source;await this.getUtterances(e),await this.clear(e)}}async clearAllMemories(){for(let e of(await n.default.readdir(a)).filter(e=>e.endsWith(".utterances.json"))){let t=e.replace(".utterances.json","");await this.clear(t)}}async saveMotif(e){let t=i.default.join(a,"motifs.json");try{let s=await n.default.readFile(t,"utf-8"),r=JSON.parse(s);r.push(e),await n.default.writeFile(t,JSON.stringify(r,null,2),"utf-8")}catch{await n.default.writeFile(t,JSON.stringify([e],null,2),"utf-8")}}async getMotifs(){let e=i.default.join(a,"motifs.json");try{let t=await n.default.readFile(e,"utf-8");return JSON.parse(t).map(e=>({...e,firstSeen:new Date(e.firstSeen),lastSeen:new Date(e.lastSeen)}))}catch{return[]}}async updateMotif(e){await this.saveMotif(e)}async deleteMotif(e){let t=i.default.join(a,"motifs.json");try{let s=await n.default.readFile(t,"utf-8"),r=JSON.parse(s).filter(t=>t.id!==e);await n.default.writeFile(t,JSON.stringify(r,null,2),"utf-8")}catch{}}}t.FileStore=o},3823:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqliteStore=void 0;let r=function(e){return e&&e.__esModule?e:{default:e}}(s(Object(function(){var e=Error("Cannot find module 'better-sqlite3'");throw e.code="MODULE_NOT_FOUND",e}())));class n{constructor(e="./data/memory.db"){this.dbPath=e,this.db=new r.default(e)}async init(){try{this.db.exec(`
        CREATE TABLE IF NOT EXISTS memories (
          id TEXT PRIMARY KEY,
          utterance_id TEXT NOT NULL,
          utterance_text TEXT NOT NULL,
          utterance_timestamp TEXT NOT NULL,
          utterance_source TEXT NOT NULL,
          utterance_tags TEXT,
          utterance_metadata TEXT,
          utterance_emotional_tone TEXT,
          importance REAL NOT NULL,
          access_count INTEGER NOT NULL DEFAULT 0,
          last_accessed TEXT NOT NULL,
          created_at TEXT NOT NULL,
          motifs TEXT,
          summary TEXT
        );

        CREATE TABLE IF NOT EXISTS motifs (
          id TEXT PRIMARY KEY,
          pattern TEXT NOT NULL,
          frequency INTEGER NOT NULL DEFAULT 1,
          first_seen TEXT NOT NULL,
          last_seen TEXT NOT NULL,
          related_memories TEXT,
          strength REAL NOT NULL DEFAULT 0.5
        );

        CREATE TABLE IF NOT EXISTS summaries (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          agent_id TEXT NOT NULL,
          summary_data TEXT NOT NULL,
          created_at TEXT NOT NULL
        );

        CREATE INDEX IF NOT EXISTS idx_memories_source ON memories(utterance_source);
        CREATE INDEX IF NOT EXISTS idx_memories_timestamp ON memories(utterance_timestamp);
        CREATE INDEX IF NOT EXISTS idx_memories_importance ON memories(importance);
        CREATE INDEX IF NOT EXISTS idx_motifs_pattern ON motifs(pattern);
        CREATE INDEX IF NOT EXISTS idx_motifs_frequency ON motifs(frequency);
        CREATE INDEX IF NOT EXISTS idx_summaries_agent ON summaries(agent_id);
      `)}catch(e){throw Error(`Failed to initialize SqliteStore: ${e}`)}}async saveUtterance(e,t){return this.saveMemory(t)}async getUtterances(e,t){let s=this.db.prepare(`
      SELECT * FROM memories 
      WHERE utterance_source = ? 
      ORDER BY created_at DESC
      ${t?"LIMIT ?":""}
    `);return(t?s.all(e,t):s.all(e)).map(e=>this.rowToMemoryItem(e))}async saveSummary(e,t){this.db.prepare(`
      INSERT INTO summaries (agent_id, summary_data, created_at)
      VALUES (?, ?, ?)
    `).run(e,JSON.stringify(t),new Date().toISOString())}async getLatestSummary(e){let t=this.db.prepare(`
      SELECT summary_data FROM summaries 
      WHERE agent_id = ? 
      ORDER BY created_at DESC 
      LIMIT 1
    `).get(e);return t?JSON.parse(t.summary_data):null}async clear(e){this.db.prepare("DELETE FROM memories WHERE utterance_source = ?").run(e)}async saveMemory(e){try{this.db.prepare(`
        INSERT OR REPLACE INTO memories (
          id, utterance_id, utterance_text, utterance_timestamp, utterance_source,
          utterance_tags, utterance_metadata, utterance_emotional_tone,
          importance, access_count, last_accessed, created_at, motifs, summary
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
      `).run(e.id,e.utterance.id,e.utterance.text,e.utterance.timestamp.toISOString(),e.utterance.source,JSON.stringify(e.utterance.tags||[]),JSON.stringify(e.utterance.metadata||{}),JSON.stringify(e.utterance.emotionalTone||null),e.importance,e.accessCount,e.lastAccessed.toISOString(),e.createdAt.toISOString(),JSON.stringify(e.motifs||[]),e.summary||null)}catch(e){throw Error(`Failed to save memory: ${e}`)}}async getMemory(e){try{let t=this.db.prepare("SELECT * FROM memories WHERE id = ?").get(e);if(!t)return null;return this.rowToMemoryItem(t)}catch(e){throw Error(`Failed to get memory: ${e}`)}}async getAllMemories(){try{return this.db.prepare("SELECT * FROM memories ORDER BY created_at DESC").all().map(e=>this.rowToMemoryItem(e))}catch(e){throw Error(`Failed to get all memories: ${e}`)}}async getMemoriesBySource(e){try{return this.db.prepare("SELECT * FROM memories WHERE utterance_source = ? ORDER BY created_at DESC").all(e).map(e=>this.rowToMemoryItem(e))}catch(e){throw Error(`Failed to get memories by source: ${e}`)}}async getMemoriesByTimeRange(e,t){try{return this.db.prepare(`
        SELECT * FROM memories 
        WHERE utterance_timestamp BETWEEN ? AND ? 
        ORDER BY created_at DESC
      `).all(e.toISOString(),t.toISOString()).map(e=>this.rowToMemoryItem(e))}catch(e){throw Error(`Failed to get memories by time range: ${e}`)}}async deleteMemory(e){try{this.db.prepare("DELETE FROM memories WHERE id = ?").run(e)}catch(e){throw Error(`Failed to delete memory: ${e}`)}}async clearAllMemories(){try{this.db.exec("DELETE FROM memories")}catch(e){throw Error(`Failed to clear all memories: ${e}`)}}async saveMotif(e){try{this.db.prepare(`
        INSERT OR REPLACE INTO motifs (
          id, pattern, frequency, first_seen, last_seen, related_memories, strength
        ) VALUES (?, ?, ?, ?, ?, ?, ?)
      `).run(e.id,e.pattern,e.frequency,e.firstSeen.toISOString(),e.lastSeen.toISOString(),JSON.stringify(e.relatedMemories||[]),e.strength)}catch(e){throw Error(`Failed to save motif: ${e}`)}}async getMotifs(){try{return this.db.prepare("SELECT * FROM motifs ORDER BY frequency DESC").all().map(e=>this.rowToMotif(e))}catch(e){throw Error(`Failed to get motifs: ${e}`)}}async updateMotif(e){try{await this.saveMotif(e)}catch(e){throw Error(`Failed to update motif: ${e}`)}}async deleteMotif(e){try{this.db.prepare("DELETE FROM motifs WHERE id = ?").run(e)}catch(e){throw Error(`Failed to delete motif: ${e}`)}}close(){this.db.close()}rowToMemoryItem(e){let t={id:e.utterance_id,text:e.utterance_text,timestamp:new Date(e.utterance_timestamp),source:e.utterance_source,tags:JSON.parse(e.utterance_tags||"[]"),metadata:JSON.parse(e.utterance_metadata||"{}"),emotionalTone:e.utterance_emotional_tone?JSON.parse(e.utterance_emotional_tone):void 0};return{id:e.id,utterance:t,importance:e.importance,accessCount:e.access_count,lastAccessed:new Date(e.last_accessed),createdAt:new Date(e.created_at),motifs:JSON.parse(e.motifs||"[]"),summary:e.summary||void 0}}rowToMotif(e){return{id:e.id,pattern:e.pattern,frequency:e.frequency,firstSeen:new Date(e.first_seen),lastSeen:new Date(e.last_seen),relatedMemories:JSON.parse(e.related_memories||"[]"),strength:e.strength}}}t.SqliteStore=n},7718:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>a});var r=s(9013),n=s(3219),i=s.n(n);s(5556);let a={title:"ChatPipes - AI Conversation Orchestration",description:"AI conversation orchestration platform with multi-agent support"};function o({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:e})})}},151:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(3189).createProxy)(String.raw`D:\Work\chatPipes\apps\web\src\app\page.tsx#default`)},5556:()=>{},3484:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.validate=t.v7=t.v6ToV1=t.v6=t.v5=t.v4=t.v3=t.v1ToV6=t.v1=t.stringify=t.parse=t.NIL=t.MAX=void 0;var r=s(7763);Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return r.default}});var n=s(9727);Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return n.default}});var i=s(6512);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return i.default}});var a=s(2236);Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return a.default}});var o=s(4413);Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return o.default}});var l=s(5904);Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return l.default}});var u=s(7661);Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return u.default}});var c=s(834);Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return c.default}});var m=s(2864);Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return m.default}});var h=s(8285);Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return h.default}});var d=s(9714);Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return d.default}});var g=s(8497);Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return g.default}});var f=s(1031);Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return f.default}});var p=s(7353);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return p.default}})},7763:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},7358:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(4770);t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,r.createHash)("md5").update(e).digest()}},2312:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(4770);t.default={randomUUID:r.randomUUID}},9727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="00000000-0000-0000-0000-000000000000"},6512:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(1031);t.default=function(e){let t;if(!(0,r.default)(e))throw TypeError("Invalid UUID");return Uint8Array.of((t=parseInt(e.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,255&t,(t=parseInt(e.slice(9,13),16))>>>8,255&t,(t=parseInt(e.slice(14,18),16))>>>8,255&t,(t=parseInt(e.slice(19,23),16))>>>8,255&t,(t=parseInt(e.slice(24,36),16))/1099511627776&255,t/4294967296&255,t>>>24&255,t>>>16&255,t>>>8&255,255&t)}},3952:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},3278:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(4770),n=new Uint8Array(256),i=n.length;t.default=function(){return i>n.length-16&&((0,r.randomFillSync)(n),i=0),n.slice(i,i+=16)}},4489:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(4770);t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,r.createHash)("sha1").update(e).digest()}},2236:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeStringify=void 0;let r=s(1031),n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function i(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}t.unsafeStringify=i,t.default=function(e,t=0){let s=i(e,t);if(!(0,r.default)(s))throw TypeError("Stringified UUID is invalid");return s}},4413:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateV1State=void 0;let r=s(3278),n=s(2236),i={};function a(e,t,s){return e.msecs??=-1/0,e.nsecs??=0,t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=s.slice(10,16),e.node[0]|=1,e.clockseq=(s[8]<<8|s[9])&16383),e.msecs=t,e}function o(e,t,s,r,n,i,a=0){if(e.length<16)throw Error("Random bytes length must be >= 16");if(i){if(a<0||a+16>i.length)throw RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`)}else i=new Uint8Array(16),a=0;t??=Date.now(),s??=0,r??=(e[8]<<8|e[9])&16383,n??=e.slice(10,16);let o=((268435455&(t+=122192928e5))*1e4+s)%4294967296;i[a++]=o>>>24&255,i[a++]=o>>>16&255,i[a++]=o>>>8&255,i[a++]=255&o;let l=t/4294967296*1e4&268435455;i[a++]=l>>>8&255,i[a++]=255&l,i[a++]=l>>>24&15|16,i[a++]=l>>>16&255,i[a++]=r>>>8|128,i[a++]=255&r;for(let e=0;e<6;++e)i[a++]=n[e];return i}t.updateV1State=a,t.default=function(e,t,s){let l;let u=e?._v6??!1;if(e){let t=Object.keys(e);1===t.length&&"_v6"===t[0]&&(e=void 0)}if(e)l=o(e.random??e.rng?.()??(0,r.default)(),e.msecs,e.nsecs,e.clockseq,e.node,t,s);else{let e=Date.now(),n=(0,r.default)();a(i,e,n),l=o(n,i.msecs,i.nsecs,u?void 0:i.clockseq,u?void 0:i.node,t,s)}return t??(0,n.unsafeStringify)(l)}},5904:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(6512),n=s(2236);t.default=function(e){var t;let s=(t="string"==typeof e?(0,r.default)(e):e,Uint8Array.of((15&t[6])<<4|t[7]>>4&15,(15&t[7])<<4|(240&t[4])>>4,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,(15&t[1])<<4|(240&t[2])>>4,96|15&t[2],t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?(0,n.unsafeStringify)(s):s}},7661:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;let r=s(7358),n=s(6840);var i=s(6840);function a(e,t,s,i){return(0,n.default)(48,r.default,e,t,s,i)}Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return i.URL}}),a.DNS=n.DNS,a.URL=n.URL,t.default=a},6840:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=t.stringToBytes=void 0;let r=s(6512),n=s(2236);function i(e){let t=new Uint8Array((e=unescape(encodeURIComponent(e))).length);for(let s=0;s<e.length;++s)t[s]=e.charCodeAt(s);return t}t.stringToBytes=i,t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",t.default=function(e,t,s,a,o,l){let u="string"==typeof s?i(s):s,c="string"==typeof a?(0,r.default)(a):a;if("string"==typeof a&&(a=(0,r.default)(a)),a?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let m=new Uint8Array(16+u.length);if(m.set(c),m.set(u,c.length),(m=t(m))[6]=15&m[6]|e,m[8]=63&m[8]|128,o){l=l||0;for(let e=0;e<16;++e)o[l+e]=m[e];return o}return(0,n.unsafeStringify)(m)}},834:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(2312),n=s(3278),i=s(2236);t.default=function(e,t,s){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();let a=(e=e||{}).random??e.rng?.()??(0,n.default)();if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if((s=s||0)<0||s+16>t.length)throw RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[s+e]=a[e];return t}return(0,i.unsafeStringify)(a)}},2864:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;let r=s(4489),n=s(6840);var i=s(6840);function a(e,t,s,i){return(0,n.default)(80,r.default,e,t,s,i)}Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return i.URL}}),a.DNS=n.DNS,a.URL=n.URL,t.default=a},8285:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(2236),n=s(4413),i=s(5904);t.default=function(e,t,s){e??={},s??=0;let a=(0,n.default)({...e,_v6:!0},new Uint8Array(16));if(a=(0,i.default)(a),t){for(let e=0;e<16;e++)t[s+e]=a[e];return t}return(0,r.unsafeStringify)(a)}},9714:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(6512),n=s(2236);t.default=function(e){var t;let s=(t="string"==typeof e?(0,r.default)(e):e,Uint8Array.of((15&t[3])<<4|t[4]>>4&15,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|15&t[6],t[7],(15&t[1])<<4|(240&t[2])>>4,(15&t[2])<<4|(240&t[3])>>4,16|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?(0,n.unsafeStringify)(s):s}},8497:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateV7State=void 0;let r=s(3278),n=s(2236),i={};function a(e,t,s){return e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=s[6]<<23|s[7]<<16|s[8]<<8|s[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++),e}function o(e,t,s,r,n=0){if(e.length<16)throw Error("Random bytes length must be >= 16");if(r){if(n<0||n+16>r.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`)}else r=new Uint8Array(16),n=0;return t??=Date.now(),s??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],r[n++]=t/1099511627776&255,r[n++]=t/4294967296&255,r[n++]=t/16777216&255,r[n++]=t/65536&255,r[n++]=t/256&255,r[n++]=255&t,r[n++]=112|s>>>28&15,r[n++]=s>>>20&255,r[n++]=128|s>>>14&63,r[n++]=s>>>6&255,r[n++]=s<<2&255|3&e[10],r[n++]=e[11],r[n++]=e[12],r[n++]=e[13],r[n++]=e[14],r[n++]=e[15],r}t.updateV7State=a,t.default=function(e,t,s){let l;if(e)l=o(e.random??e.rng?.()??(0,r.default)(),e.msecs,e.seq,t,s);else{let e=Date.now(),n=(0,r.default)();a(i,e,n),l=o(n,i.msecs,i.seq,t,s)}return t??(0,n.unsafeStringify)(l)}},1031:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(3952);t.default=function(e){return"string"==typeof e&&r.default.test(e)}},7353:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(1031);t.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[731],()=>s(7741));module.exports=r})();